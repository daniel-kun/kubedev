{
  "name": "foo-service",
  "description": "This is a sample service generated by kubedev.",
  "imagePullSecrets": "foo-creds",
  "imageRegistry": "foo-registry",
  "helmReleaseName": "special-foo-registry",
  "required-envs": {
    "FOO_SERVICE_GLOBAL_ENV1": {
      "documentation": "Test env var #1 (global)"
    },
    "FOO_SERVICE_GLOBAL_ENV2": {
      "documentation": "Test env var #1 (global)",
      "build": true,
      "container": false
    }
  },
  "deployments": {
    "foo-deploy": {
      "usedFrameworks": ["pipenv"],
      "ports": {
        "http": {
          "container": "8081",
          "service": "8082",
          "dev": "8083"
        },
        "https": {
          "container": "8443",
          "service": "8543",
          "dev": "8643"
        }
      },
      "volumes": {
        "dev": {
          "output_docker": "/test/output"
        }
      },
      "required-envs": {
        "FOO_SERVICE_DEPLOY_ENV1": {
          "documentation": "Test env var #1"
        },
        "FOO_SERVICE_DEPLOY_ENV2": {
          "documentation": "Test env var #2",
          "container": true
        },
        "FOO_SERVICE_DEPLOY_ENV3": {
          "build": true,
          "container": false
        }
      },
      "systemTest": {
        "variables": {
          "FOO_DB_HOST": "postgres",
          "FOO_DB_USER": "some-user",
          "FOO_DB_DATABASE": "foodb",
          "FOO_DB_PASSWORD": "My$ecureP4ssw0rd"
        },
        "buildArgs": {
          "SOME_ARG": "some-value"
        },
        "testContainer": {
          "variables": {
            "PGPASSWORD": "${FOO_DB_PASSWORD}"
          }
        },
        "services": {
          "{foo-deploy}": {
            "hostname": "foo-deploy",
            "ports": [5000],
            "variables": {
              "FOO_DEBUG": "1"
            }
          },
          "postgres:12": {
            "hostname": "postgres",
            "ports": [5432],
            "variables": {
              "POSTGRES_USER": "${FOO_DB_USER}",
              "POSTGRES_PASSWORD": "${FOO_DB_PASSWORD}"
            }
          }
        }
      }
    }
  }
}
